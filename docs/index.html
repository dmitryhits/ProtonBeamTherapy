---

title: Simulation of the proton beam tracker/calorimeter


keywords: fastai
sidebar: home_sidebar

summary: "This project will have tools to aid a simulation and optimizatin of the proton beam tracker/calorimeter in application for determining the corrections to the proton stopping powers for treatment planning."
description: "This project will have tools to aid a simulation and optimizatin of the proton beam tracker/calorimeter in application for determining the corrections to the proton stopping powers for treatment planning."
nb_path: "index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><img src="/protonbeamtherapy/media/gate_simulation.png" alt="image.png" title="Gate Simulation"></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Prerequisites">Prerequisites<a class="anchor-link" href="#Prerequisites"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>To use this package you need to first install:</p>
<ul>
<li><a href="https://root.cern/install/">root</a> </li>
<li><a href="http://www.opengatecollaboration.org">Gate</a><ul>
<li>I am using a version of Gate I cloned from <a href="https://github.com/OpenGATE/Gate">their Github</a> page, because the official 9.0 verion has a bug.</li>
</ul>
</li>
<li><a href="https://geant4.web.cern.ch/support/download">Geant4</a><ul>
<li>Check the requirements for the correct verion of Geant4 on <a href="http://www.opengatecollaboration.org">OpenGate</a> page</li>
</ul>
</li>
<li><a href="https://cmake.org/download/">Cmake</a></li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Install">Install<a class="anchor-link" href="#Install"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p><strong>Not working yet</strong></p>
<p><del><code>pip install gate_simulation</code></del></p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="How-to-use">How to use<a class="anchor-link" href="#How-to-use"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Initiate a macro writer:</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">test_macro</span> <span class="o">=</span> <span class="n">MacroWriter</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="The-error-on-the-mean-versus-sensor-thickness">The error on the mean versus sensor thickness<a class="anchor-link" href="#The-error-on-the-mean-versus-sensor-thickness"> </a></h2><p>Sensor material is silicon.
The mean is the trimmed mean the upper limit is twice the standard deviation from the untrimmed mean.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">stats</span>

<span class="n">tm</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">etm</span> <span class="o">=</span> <span class="p">[]</span>
<span class="n">thicknesses</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
<span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">thicknesses</span><span class="p">:</span>
    <span class="n">main_macro</span><span class="p">,</span> <span class="n">output_root</span> <span class="o">=</span> <span class="n">create_all</span><span class="p">(</span><span class="n">sensor_thickness</span><span class="o">=</span><span class="n">t</span><span class="p">)</span>
    <span class="n">run_macro</span><span class="p">(</span><span class="n">main_macro</span><span class="p">)</span>
    <span class="n">root_hits_file</span> <span class="o">=</span> <span class="n">output_root</span><span class="p">[</span><span class="s1">&#39;hits&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
    <span class="n">edep</span> <span class="o">=</span> <span class="n">get_edep_data</span><span class="p">(</span><span class="n">get_df_subentry2</span><span class="p">(</span><span class="n">root_hits_file</span><span class="p">),</span> <span class="n">sensor</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
    <span class="c1"># check that edep exists</span>
    <span class="k">if</span> <span class="n">edep</span><span class="o">.</span><span class="n">any</span><span class="p">():</span>
        <span class="n">tm</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">tmean</span><span class="p">(</span><span class="n">edep</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="n">edep</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">edep</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">edep</span><span class="p">))))</span>
        <span class="n">etm</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">stats</span><span class="o">.</span><span class="n">tsem</span><span class="p">(</span><span class="n">edep</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="n">edep</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">edep</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">edep</span><span class="p">))))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No result for point </span><span class="si">{</span><span class="n">t</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="c1"># print(f&#39;Trimmed mean {round(tm, 2)}, Error on trimmed mean: {round(etm, 2)}, SNR: {round(tm/etm, 2)}&#39;)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>system thickness: 0.6
y location of sensor 0 is: 0.25
system created with: thickness: 0.6 at loc: -21
system thickness: 0.7
y location of sensor 0 is: 0.24999999999999997
system created with: thickness: 0.7 at loc: -21
system thickness: 0.8
y location of sensor 0 is: 0.25
system created with: thickness: 0.8 at loc: -21
system thickness: 0.9
y location of sensor 0 is: 0.25
system created with: thickness: 0.9 at loc: -21
system thickness: 1.0
y location of sensor 0 is: 0.25
system created with: thickness: 1.0 at loc: -21
system thickness: 1.1
y location of sensor 0 is: 0.25000000000000006
system created with: thickness: 1.1 at loc: -21
system thickness: 1.2000000000000002
y location of sensor 0 is: 0.25000000000000006
system created with: thickness: 1.2000000000000002 at loc: -21
system thickness: 1.3
y location of sensor 0 is: 0.25
system created with: thickness: 1.3 at loc: -21
system thickness: 1.4
y location of sensor 0 is: 0.24999999999999994
system created with: thickness: 1.4 at loc: -21
system thickness: 1.5
y location of sensor 0 is: 0.25
system created with: thickness: 1.5 at loc: -21
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>20 phatom layers each 1 cm thick, the two outer layers had skull as their material, the 18 inner ones have water as the material. The beam was 250 MeV proton pencil beam. The sensor thickness was varied between 100 and 1000 $\mu$m</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">thicknesses</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">tm</span><span class="p">)</span><span class="o">/</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">etm</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.collections.PathCollection at 0x7fa760ce1d00&gt;</pre>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Save-the-data-to-and-read-them-back-from-csv">Save the data to and read them back from csv<a class="anchor-link" href="#Save-the-data-to-and-read-them-back-from-csv"> </a></h3>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>save the above example with 20 phantom layers</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;thickness&quot;</span><span class="p">,</span> <span class="s2">&quot;trimmed mean&quot;</span><span class="p">,</span> <span class="s2">&quot;error_on_trimmed_mean&quot;</span><span class="p">]</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;thickness_20.csv&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f_out</span><span class="p">:</span>
    <span class="n">f_writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f_out</span><span class="p">,</span> <span class="n">delimiter</span><span class="o">=</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="n">lineterminator</span><span class="o">=</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="n">f_writer</span><span class="o">.</span><span class="n">writerow</span><span class="p">(</span><span class="n">columns</span><span class="p">)</span>
    <span class="n">f_writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">thicknesses</span><span class="p">,</span> <span class="n">tm</span><span class="p">,</span> <span class="n">etm</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Read back an earlier result with 5 phatom layers each 1 cm thick, the two outer layers had skull as their material, the 3 inner ones have water as the material. The beam the same as in the above example 250 MeV proton pencil beam. The sensor thickness was varied between 20 and 1000 $\mu$m in 20 $\mu$m steps</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span>
<span class="n">thickness_df</span> <span class="o">=</span> <span class="n">pandas</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;thickness.csv&#39;</span><span class="p">)</span>
<span class="c1"># thickness_df.head()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">thickness_df</span><span class="p">[</span><span class="s1">&#39;thickness&#39;</span><span class="p">],</span> <span class="n">thickness_df</span><span class="p">[</span><span class="s1">&#39;trimmed mean&#39;</span><span class="p">]</span><span class="o">/</span><span class="n">thickness_df</span><span class="p">[</span><span class="s1">&#39;error_on_trimmed_mean&#39;</span><span class="p">])</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>&lt;matplotlib.collections.PathCollection at 0x7fa747cba040&gt;</pre>
</div>

</div>

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Study of the trimmed mean. I have checked that the error on the trimmed mean is larger than the error arising from uncertainty on the upper trim value. The upper trim value of 2 standard deviation from the untrimmed mean seems to give a reasonable result.</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">m</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">edep</span><span class="p">)</span>
<span class="n">em</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">sem</span><span class="p">(</span><span class="n">edep</span><span class="p">)</span>
<span class="n">tm</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">tmean</span><span class="p">(</span><span class="n">edep</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="n">edep</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">edep</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">edep</span><span class="p">)))</span>
<span class="n">tm_p</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">tmean</span><span class="p">(</span><span class="n">edep</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="n">edep</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">edep</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">edep</span><span class="p">)</span> <span class="o">+</span> <span class="n">em</span><span class="p">))</span>
<span class="n">tm_m</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">tmean</span><span class="p">(</span><span class="n">edep</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="n">edep</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">edep</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">edep</span><span class="p">)</span> <span class="o">-</span> <span class="n">em</span><span class="p">))</span>
<span class="n">etm</span> <span class="o">=</span> <span class="n">stats</span><span class="o">.</span><span class="n">tsem</span><span class="p">(</span><span class="n">edep</span><span class="p">,</span> <span class="n">limits</span><span class="o">=</span><span class="p">(</span><span class="n">edep</span><span class="o">.</span><span class="n">min</span><span class="p">(),</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">edep</span><span class="p">)</span> <span class="o">+</span> <span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">std</span><span class="p">(</span><span class="n">edep</span><span class="p">)))</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Mean:        </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">m</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1">,       Error on mean: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">em</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1">, SNR: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">m</span><span class="o">/</span><span class="n">em</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Trimmed mean </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">tm</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1">, Error on trimmed mean: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">etm</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1">, SNR: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">tm</span><span class="o">/</span><span class="n">etm</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Trimmed mean upper </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">tm_p</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1">, Trimmed mean lower </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">tm_m</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1"> difference: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">tm_p</span> <span class="o">-</span> <span class="n">tm_m</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1">, SNR: </span><span class="si">{</span><span class="nb">round</span><span class="p">(</span><span class="n">tm</span><span class="o">/</span><span class="p">(</span><span class="n">tm_p</span> <span class="o">-</span> <span class="n">tm_m</span><span class="p">),</span> <span class="mi">2</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>

<span class="c1">#print(stats.mode(np.round(edep, 0)))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Mean:        1152.969970703125,       Error on mean: 11.57, SNR: 99.67
Trimmed mean 1047.13, Error on trimmed mean: 2.89, SNR: 362.09
Trimmed mean upper 1047.39, Trimmed mean lower 1046.61 difference: 0.78, SNR: 1338.37
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<hr>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Kinetic-energy-from-momentum">Kinetic energy from momentum<a class="anchor-link" href="#Kinetic-energy-from-momentum"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Recalculating the kinetic energy $E_k$ of the  particle mass  $M$ from its momentum $p$  according to:
{% raw %}
$$E_k = \sqrt{M^2  + p^2} - M$$
{% endraw %}</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;The kinetic energy of 2 GeV/c proton is </span><span class="si">{</span><span class="n">Ek</span><span class="p">(</span><span class="mi">938</span><span class="p">,</span><span class="mi">2000</span><span class="p">)</span><span class="si">:</span><span class="s1">.0f</span><span class="si">}</span><span class="s1"> MeV&#39;</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Export-notebooks">Export notebooks<a class="anchor-link" href="#Export-notebooks"> </a></h2>
</div>
</div>
</div>
</div>
 

